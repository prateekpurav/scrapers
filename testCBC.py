import requests, ast
import fileUtils



url = "https://www.cbc.be/PSA/A058/service/calculateLoanSimulation/1"

querystring = {"cb":"1561110124099"}

payload = "{\"creditPurposeCode\":{\"T\":\"text\",\"V\":\"80301\"},\"purchaseAmount\":{\"V\":\"7500\",\"T\":\"decimal\"},\"loanAmount\":{\"V\":\"3850\",\"T\":\"decimal\"},\"maturityMonthQuantity\":{\"V\":\"36\",\"E\":\"MHASxwH5ktYXwWDabcMbHetMxcVhc4GsmxrADn/7az0=\",\"T\":\"decimal\"}}"
headers = {
    'Accept': "application/json",
    'Cookie': "PSASESSIONID=2D6A154C809BABB173C30A6285790CA0.1; TS015834e9=01998c50f2c0936e8a561fdbba05896cf5072929444d60297a08b77a22c3cd2f38169453a58cbe413c08c28c906daf281acbcc66f2f14717bf158ff1c23c74d767c12357249f21e6cdadeb22dc8a689b868290aa44514a9e89de1fa1dfcdc96bea4d686379; sat_track=true; aem_segment=particuliers; v24u_cbcprod=42a1a310-18b3-477e-925f-ed292f01d8cb; s_fid=6E4741E09730A816-00660E9578ADA43D; PD_STATEFUL_873bca30-37ca-11e9-8a4c-005056864a2c=VHWWWCBCBE; PD_STATEFUL_86b729b0-37ca-11e9-8a4c-005056864a2c=VHWWWCBCBE; co2-frontend-version=0.9.0; 72fdbf2d9a41704e366d272a49dace78=e54a589ffa80c24c633e47edd153f929; PD_STATEFUL_68946e5c-37ca-11e9-8a4c-005056864a2c=%2FCO2; vee24.testCookie=1; PD_STATEFUL_7a856b2a-37ca-11e9-8a4c-005056864a2c=%2FPSA; v24s_cbcprod=1e1a4d4c-7ac1-4f79-921e-a91ef1f4689c; PD_STATEFUL_75eebc4c-37ca-11e9-8a4c-005056864a2c=%2FPCO; s_cc=true; vee24.userIsActive=1; cookiepolicy_popup_shown=true; cookiepolicy_popup_shown_date=1561102060800; opt_in_cookies_type_3=true; check=true; AMCVS_DB71403D53BBF4B80A490D4C%40AdobeOrg=1; _CT_RS_=Recording; WRUID=2310662737608829; AAMC_kbcgroup_0=REGION%7C6; aam_uuid=46434052447686858472225026024294908697; rxVisitor=1561102120290DV128C2N1RAAQHOMT72FT6COEBBS4A6I; dtSa=-; TS0127c266=01998c50f2b532c92957c9c915caea7094b15eb309df5fb748dd7df87e68427083f05e297c2ef52ab2bd582b0ce5e1afbd245618a4724b35fbb84c6b83b9b6ff6a5b5a868e; dtPC=1$502120275_506h-vFGHCMDDGMFEIKCNHNIJMGLFBJDIPOFEG; dtLatC=1; dtCookie=1$4313E317F561F381DA9F7A5307AB8456|04841c48c5a154ef|1; rxvt=1561104091229|1561102120296; PD_STATEFUL_8bf1fa4c-30a7-11e9-bf0b-00505686a95a=VHWWWCBCBE; PD_STATEFUL_85bffd74-30a5-11e9-bf0b-00505686a95a=%2FPSA; PD_STATEFUL_11c3dc0c-309f-11e9-bf0b-00505686a95a=%2FCO2; PD_STATEFUL_83034d70-30a5-11e9-bf0b-00505686a95a=%2FPCO; s_sq=%5B%5BB%5D%5D; mbox=PC#8261543916ab48d0b03650a8970061ab.26_24#1624370713|session#8d1ea64a398f4003a17344ed9fbef896#1561127773; s_ppvl=home%2C35%2C35%2C969%2C1920%2C969%2C1920%2C1080%2C1%2CP; s_ptc=1.15%5E%5E0.00%5E%5E0.00%5E%5E0.00%5E%5E0.31%5E%5E0.31%5E%5E6.02%5E%5E0.01%5E%5E7.51; __CT_Data=gpv=7&ckp=tld&dm=cbc.be&apv_88_www26=7&cpv_88_www26=7&rpv_88_www26=7; s_ppn=psa0701; s_ppv=home%2C35%2C35%2C969%2C1920%2C969%2C1920%2C1080%2C1%2CP; ctm={'pgv':8053002015745364|'vst':7853467478412299|'vstr':5569587970069582|'intr':1561126283831|'v':1|'lvst':361}; AMCV_DB71403D53BBF4B80A490D4C%40AdobeOrg=307333927%7CMCIDTS%7C18069%7CMCMID%7C46459547704778007132227573350981095687%7CMCAID%7CNONE%7CMCOPTOUT-1561134560s%7CNONE%7CvVersion%7C3.1.2%7CMCAAMLH-1561732160%7C6%7CMCAAMB-1561732160%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI%7CMCCIDH%7C-265859109; PD_STATEFUL_50c52982-30af-11e9-b67a-00505683782b=VHWWWCBCBE; PD_STATEFUL_ff89c7f0-30ac-11e9-b67a-00505683782b=%2FPSA; T_ID=!jWmQWG2KOKg7GrO2Dl6YBL3ZxN+50J9YVfyMfzValQbgQ6MdOyz0yaJEk1NfaDhqa1Abd2nW779d6w==; TS011f471c=01998c50f2f63e028bda6fd279b49697776a354c93a8bedeb775f84a9bd04f53939098d4030f2d37f5c2a6cafd76299aeb3cd1292fc92964769b7770d8deec7bd482ea457c3e52a3f68f53b0c21b4dfcd4274475e84ebae3f099e14c3e7df142f760339084f600c561031c8fb088e5988101ff5a680fe299ff682f33f59141c1b700a10778d5ddb12b1d28fde3ef7c1ea7953d6db5c50bc21e828fd0941ed5a209ba6435ddf140bee3f71b23002872e114f4897adeef97f50313b9db273360f50774e30ec9,PSASESSIONID=2D6A154C809BABB173C30A6285790CA0.1; TS015834e9=01998c50f2c0936e8a561fdbba05896cf5072929444d60297a08b77a22c3cd2f38169453a58cbe413c08c28c906daf281acbcc66f2f14717bf158ff1c23c74d767c12357249f21e6cdadeb22dc8a689b868290aa44514a9e89de1fa1dfcdc96bea4d686379; sat_track=true; aem_segment=particuliers; v24u_cbcprod=42a1a310-18b3-477e-925f-ed292f01d8cb; s_fid=6E4741E09730A816-00660E9578ADA43D; PD_STATEFUL_873bca30-37ca-11e9-8a4c-005056864a2c=VHWWWCBCBE; PD_STATEFUL_86b729b0-37ca-11e9-8a4c-005056864a2c=VHWWWCBCBE; co2-frontend-version=0.9.0; 72fdbf2d9a41704e366d272a49dace78=e54a589ffa80c24c633e47edd153f929; PD_STATEFUL_68946e5c-37ca-11e9-8a4c-005056864a2c=%2FCO2; vee24.testCookie=1; PD_STATEFUL_7a856b2a-37ca-11e9-8a4c-005056864a2c=%2FPSA; v24s_cbcprod=1e1a4d4c-7ac1-4f79-921e-a91ef1f4689c; PD_STATEFUL_75eebc4c-37ca-11e9-8a4c-005056864a2c=%2FPCO; s_cc=true; vee24.userIsActive=1; cookiepolicy_popup_shown=true; cookiepolicy_popup_shown_date=1561102060800; opt_in_cookies_type_3=true; check=true; AMCVS_DB71403D53BBF4B80A490D4C%40AdobeOrg=1; _CT_RS_=Recording; WRUID=2310662737608829; AAMC_kbcgroup_0=REGION%7C6; aam_uuid=46434052447686858472225026024294908697; rxVisitor=1561102120290DV128C2N1RAAQHOMT72FT6COEBBS4A6I; dtSa=-; TS0127c266=01998c50f2b532c92957c9c915caea7094b15eb309df5fb748dd7df87e68427083f05e297c2ef52ab2bd582b0ce5e1afbd245618a4724b35fbb84c6b83b9b6ff6a5b5a868e; dtPC=1$502120275_506h-vFGHCMDDGMFEIKCNHNIJMGLFBJDIPOFEG; dtLatC=1; dtCookie=1$4313E317F561F381DA9F7A5307AB8456|04841c48c5a154ef|1; rxvt=1561104091229|1561102120296; PD_STATEFUL_8bf1fa4c-30a7-11e9-bf0b-00505686a95a=VHWWWCBCBE; PD_STATEFUL_85bffd74-30a5-11e9-bf0b-00505686a95a=%2FPSA; PD_STATEFUL_11c3dc0c-309f-11e9-bf0b-00505686a95a=%2FCO2; PD_STATEFUL_83034d70-30a5-11e9-bf0b-00505686a95a=%2FPCO; s_sq=%5B%5BB%5D%5D; mbox=PC#8261543916ab48d0b03650a8970061ab.26_24#1624370713|session#8d1ea64a398f4003a17344ed9fbef896#1561127773; s_ppvl=home%2C35%2C35%2C969%2C1920%2C969%2C1920%2C1080%2C1%2CP; s_ptc=1.15%5E%5E0.00%5E%5E0.00%5E%5E0.00%5E%5E0.31%5E%5E0.31%5E%5E6.02%5E%5E0.01%5E%5E7.51; __CT_Data=gpv=7&ckp=tld&dm=cbc.be&apv_88_www26=7&cpv_88_www26=7&rpv_88_www26=7; s_ppn=psa0701; s_ppv=home%2C35%2C35%2C969%2C1920%2C969%2C1920%2C1080%2C1%2CP; ctm={'pgv':8053002015745364|'vst':7853467478412299|'vstr':5569587970069582|'intr':1561126283831|'v':1|'lvst':361}; AMCV_DB71403D53BBF4B80A490D4C%40AdobeOrg=307333927%7CMCIDTS%7C18069%7CMCMID%7C46459547704778007132227573350981095687%7CMCAID%7CNONE%7CMCOPTOUT-1561134560s%7CNONE%7CvVersion%7C3.1.2%7CMCAAMLH-1561732160%7C6%7CMCAAMB-1561732160%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI%7CMCCIDH%7C-265859109; PD_STATEFUL_50c52982-30af-11e9-b67a-00505683782b=VHWWWCBCBE; PD_STATEFUL_ff89c7f0-30ac-11e9-b67a-00505683782b=%2FPSA; T_ID=!jWmQWG2KOKg7GrO2Dl6YBL3ZxN+50J9YVfyMfzValQbgQ6MdOyz0yaJEk1NfaDhqa1Abd2nW779d6w==; TS011f471c=01998c50f2f63e028bda6fd279b49697776a354c93a8bedeb775f84a9bd04f53939098d4030f2d37f5c2a6cafd76299aeb3cd1292fc92964769b7770d8deec7bd482ea457c3e52a3f68f53b0c21b4dfcd4274475e84ebae3f099e14c3e7df142f760339084f600c561031c8fb088e5988101ff5a680fe299ff682f33f59141c1b700a10778d5ddb12b1d28fde3ef7c1ea7953d6db5c50bc21e828fd0941ed5a209ba6435ddf140bee3f71b23002872e114f4897adeef97f50313b9db273360f50774e30ec9; PSASESSIONID=C75560AE4AABCB62A5FA3D1961D3AAC0.1; TS015834e9=01998c50f2261414e9e6302bd67b08fcf5d4547b504d60297a08b77a22c3cd2f38169453a58cbe413c08c28c906daf281acbcc66f2f14717bf158ff1c23c74d767c12357249f21e6cdadeb22dc8a689b868290aa445dcfc4bb54a1adc80e910bce8bb0b8ed; sat_track=true; TS0127c266=01998c50f2902f26813df43ea273eea35760806f3130619ae7ca37ac4dcceee49907fccbbdbe33b856d799ebfe84cf18a5eed920ef886c50252775d8a6c34f1590b97bc880fb9f763b80ad7996646cbe9d7a4360e4ce427d80683a80d7ff3f2b873b47125ea79347d304bcf00f69b59ef3ca680b91; TS011f471c=01998c50f2a06f652bbcd54f37c7344f62cd85368b59d45578b2b8f458816881633b3c98d096e39200c7a1a7fb44f0829e8a9ced500bf11feca900a11213175b117c791d3747a3ba18e50d282a293f3fb3faf863b29590de183a85a1e80ba5b75c85d69cce02a7355f5d14ed7bc729848065e2b0d5; PD_STATEFUL_78a410d6-37ca-11e9-8a4c-005056864a2c=%2FPSA; PD_STATEFUL_86b729b0-37ca-11e9-8a4c-005056864a2c=VHWWWCBCBE; PD_STATEFUL_863cdc9a-30a5-11e9-bf0b-00505686a95a=%2FPSA; T_ID=!WXy1I/MZU/UQgTi2Dl6YBL3ZxN+50F0ifM/wAajH1sPz9XstCRl9xxUwOxN4aehnEACeh08RslWknw==",
    'User-Agent': "PostmanRuntime/7.13.0",
    'Cache-Control': "no-cache",
    'Postman-Token': "006fe1b9-72d2-4a47-9d2b-967a076455d6,702d8871-a7b1-4973-97ce-38af09873a37",
    'content-length': "230",
    'Connection': "keep-alive",
    'cache-control': "no-cache"
    }

response = requests.request("POST", url, data=payload, headers=headers, params=querystring)

print(response.text)
print(response.text)
print(response.cookies)
colonnes = ["Provider", 'Product', 'Loan From', 'To', 'Min Term', 'Max Term', 'Rate']

quoteAmount = lambda amt: "\"{}\"".format(amt)

loanAmount = lambda l: int(l*1.1)

def makeRequest(purchaseAmount, installment):
    postData = "{\"creditPurposeCode\":{\"T\":\"text\",\"V\":\"80301\"},\"purchaseAmount\":{\"V\":" + quoteAmount(purchaseAmount) + ",\"T\":\"decimal\"},\"loanAmount\":{\"V\":" + quoteAmount(loanAmount(purchaseAmount)) + ",\"T\":\"decimal\"},\"maturityMonthQuantity\":{\"V\":"+ quoteAmount(installment) +",\"E\":\"MHASxwH5ktYXwWDabcMbHetMxcVhc4GsmxrADn/7az0=\",\"T\":\"decimal\"}}"
    response = requests.request("POST", url, data=postData, headers=headers, params=querystring)
    return ast.literal_eval(response.text[6:])

def getClueElements(dataDict):
    fileUtils.displayRates(["taux", 'montant'],[[dataDict['personalProperty']['yearInterestPercent']['V'], dataDict['personalProperty']['loanAmount']['V']]])

loanRange = list(range(2500, 25000, 1000))

monthRange = list(range(12, 72, 3))


response = requests.request("POST", url, data=payload, headers=headers, params=querystring)

print(response.text)

dtaD = makeRequest(2500, 100)
print(dtaD)

print(dtaD.keys())


session = requests.sessions










